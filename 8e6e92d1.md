---
date: 2021-08-02T20:11
---

# Vim Mappings and Notes

## Git within vim

- gD: Gdiffsplit, BCommits, :Gblame, ~ key
- Go to quickfix list, `<CR>` on the first version to diff - which opens up a fugitive split with that version.
- Go back to quickfix, yiw the hash of the version to diff against
- Navigate back to fugitive buffer of the first version, and `:Gvdiffsplit <C-r>0` (to paste the hash)

## Shortcut key mappings

:::{.ui .center .aligned}
|      VIM KEYS     |                                         |
|:-----------------:|:---------------------------------------:|
|    [gzi] [gzz]    |           zettel index, search          |
| [,tt] [,tm] [,tr] | box toggle , table mode toggle, realign |
|     [,gn] ,gp]    |            git hunk next/prev           |
|    [yaw] [daf]    |        yank/delet outer word/func       |
|    [cs'] [vs"]    |    change surround / delete surround    |
| [ds"] [yss"] [S"] |     delete / add / visual selection     |
| [gnn] [grn] [grm] |       incremental start, inc, dec       |

|     key     |            vim action            |
|:-----------:|:--------------------------------:|
| $m+h +  c/v | i3 center or reset middle window |
|    $m-spc   |        tmux cycle layouts        |
|  $m-s $m-w  |       window/session picker      |
:::

`gaip*|` => aligns table when selected

- Currently lookup consists of how2, cht.sh, then one liners with navi, then personal repository
 Need keys for ISwap

|      key     |           shell action           |
|:------------:|:--------------------------------:|
|   C-f  C-F   |        (insert) skip word        |
|   C-a C-U/F  |        highlight url/file        |
|     C-a f    |           butler search          |
|    $m-spc    |        tmux cycle layouts        |
| `$m+h` `c/v` | i3 center or reset middle window |
|  `$m-s $m-w` |       window/session picker      |

## Multiple Cursors

- select words with Ctrl-N ,create cursors vertically with Ctrl-Down/Ctrl-Up, select one character at a time with Shift-Arrows
- press n/N to get next/previous occurrence, press [/] to select next/previous cursor, press q to skip current and get next occurrence
- press Q to remove current cursor/selection, start insert mode with i,a,I,A

Two main modes: press Tab to switch between «cursor» and «extend» mode
in cursor mode commands work as they would in normal mode, in extend mode commands work as they would in visual mode

Most vim commands work as expected (motions, r to replace characters, ~ to change case, etc). Additionally you can:
  run macros/ex/normal commands at cursors
  align cursors
  transpose selections
  add patterns with regex, or from visual mode
  And more... of course, you can enter insert mode and autocomplete will work.

## Power of 'g'

```vim
# Display context (5 lines) for all occurrences of a pattern.
:g/pattern/z#.5
" Same, but with some beautification.
:g/pattern/z#.5|echo "=========="
# delete all lines matching a pattern
:g/pattern/d
# delete all lines NOT matching a pattern
:g!/pattern/d
:v/pattern/d
# Delete all blank lines (^ is start of line; \s* is zero or more whitespace characters; $ is end of line)
:g/^\s*$/d
# Double space the file (^ is start of line which matches each line).
:g/^/pu =\"\n\"
" Alternative (:put inserts nothing from the blackhole register)
:g/^/pu _
# Copy all lines matching a pattern to end of file.
:g/pattern/t$
# Move all lines matching a pattern to end of file.
:g/pattern/m$
# Copy all lines matching a pattern to register 'a'.
qaq:g/pattern/y A
# Explanation qaq is a trick to clear register a (qa starts recording a macro to register a, then q stops recording, leaving a empty). y A is an Ex command (:help :y). It yanks the current line into register A (append to register a).
# Increment each number at the start of a line, from the current line to end-of-file, by one (the exclamation mark in :normal! means this will work even if Ctrl-A has been mapped to perform a function other than its default of incrementing a number).
:.,$g/^\d/exe "normal! \<C-A>"
# Comment lines containing "DEBUG" statements in a C program.
" using :normal
g/^\s*DEBUG/exe "norm! I/* \<Esc>A */\<Esc>"
" using :substituting
g/^\s*DEBUG/s!.*!/* & */!
# Reverse lookup for records (say an address book, with Name at start-of-line and fields after a space).
:g/pattern/?^\w?p "if only name is interesting
:g/pattern/ka|?^\w?p|'ap "if name and the lookup-line is interesting
:g/pattern/?^\w?|+,/^[^ ]/-1p "if entire record is interesting
# Add text to the end of a line that begins with a certain string.
:g/^pattern/s/$/mytext
# Deleting many lines
# The command :g/pattern/d performs :d on all lines matching the pattern, see :help :delete. When a line is deleted, it is first copied to a register—since no register is specified, the default (unnamed) register is used. If many thousands of lines are deleted, the copy process can take a significant time. To avoid that waste of time, the blackhole register (_) can be specified because any copy or cut into the blackhole register performs no operation.
# Fast delete of all lines matching a pattern.
:g/pattern/d _
# Explanation See :help :range for the meaning of the constructs in the [cmd] portion of the :g commands.
# Reverse a file (just to show the power of g).
:g/^/m0
:2,8co15  "copy lines 2 through 8 after line 15
:4,15t$   "copy lines 4 through 15 to end of document (t == co)
:-t$      "copy previous line to end of document
:m0       "move current line to line 0 (i.e. the top of the document)
:.,+3m$-1 "current line through current+3 are moved to the lastLine-1 (i.e. next to last)
```
```



### Vim Environment

```
:abbreviate   - list abbreviations
:args         - argument list
:augroup      - augroups
:autocmd      - list auto-commands
:buffers      - list buffers
:breaklist    - list current breakpoints
:cabbrev      - list command mode abbreviations
:changes      - changes
:cmap         - list command mode maps
:command      - list commands
:compiler     - list compiler scripts
:digraphs     - digraphs
:file         - print filename, cursor position and status (like Ctrl-G)
:filetype     - on/off settings for filetype detect/plugins/indent
:function     - list user-defined functions (names and argument lists but not the full code)
:function Foo - user-defined function Foo() (full code list)
:highlight    - highlight groups
:history c    - command history
:history =    - expression history
:history s    - search history
:history      - your commands
:iabbrev      - list insert mode abbreviations
:imap         - list insert mode maps
:intro        - the Vim splash screen, with summary version info
:jumps        - your movements
:language     - current language settings
:let          - all variables
:let FooBar   - variable FooBar
:let g:       - global variables
:let v:       - Vim variables
:list         - buffer lines (many similar commands)
:lmap         - language mappings (set by keymap or by lmap)
:ls           - buffers
:ls!          - buffers, including "unlisted" buffers
:map!         - Insert and Command-line mode maps (imap, cmap)
:map          - Normal and Visual mode maps (nmap, vmap, xmap, smap, omap)
:map<buffer>  - buffer local Normal and Visual mode maps
:map!<buffer> - buffer local Insert and Command-line mode maps
:marks        - marks
:menu         - menu items
:messages     - message history
:nmap         - Normal-mode mappings only
:omap         - Operator-pending mode mappings only
:print        - display buffer lines (useful after :g or with a range)
:reg          - registers
:scriptnames  - all scripts sourced so far
:set all      - all options, including defaults
:setglobal    - global option values
:setlocal     - local option values
:set          - options with non-default value
:set termcap  - list terminal codes and terminal keys
:smap         - Select-mode mappings only
:spellinfo    - spellfiles used
:syntax       - syntax items
:syn sync     - current syntax sync mode
:tabs         - tab pages
:tags         - tag stack contents
:undolist     - leaves of the undo tree
:verbose      - show info about where a map or autocmd or function is defined
:version      - list version and build options
:vmap         - Visual and Select mode mappings only
:winpos       - Vim window position (gui)
:xmap         - visual mode maps only
Notes
Additional information is available to a Vim script. For example, :help tabpagebuflist() shows how to list all buffers in all tabs.

A script called bugreport.vim is provided with Vim. When run, the script produces a file with information about
```
